# IP切换工具 (IP Switch Tool)

一个轻量级的Windows命令行工具，用于快速切换网络IP配置。支持预设配置、自定义IP输入和DHCP恢复功能。

## 功能特性

- ✅ **预设IP配置**：快速切换到预定义的IP配置
- ✅ **自定义IP配置**：手动输入IP地址、子网掩码、网关和DNS
- ✅ **DHCP恢复**：一键恢复自动获取IP和DNS
- ✅ **自动提权**：自动检测并请求管理员权限（UAC）
- ✅ **默认DNS**：预设配置自动使用阿里DNS（223.5.5.5）和腾讯DNS（119.29.29.29）
- ✅ **错误处理**：完善的错误提示和验证机制

## 使用方法

### 1. 基本命令

```bash
# 显示帮助信息
ipswitch.exe help

# 切换到预设配置
ipswitch.exe test
ipswitch.exe work

# 恢复DHCP自动获取
ipswitch.exe dhcp

# 手动输入自定义IP配置
ipswitch.exe custom
```

### 2. 自定义IP配置

运行 `ipswitch.exe custom` 后，程序会依次提示输入：

```
请输入自定义 IP 配置 (留空使用默认值):
IP 地址: 192.168.1.100
子网掩码 (默认 255.255.255.0):
网关地址: 192.168.1.1
主 DNS (默认 223.5.5.5):
备用 DNS (默认 119.29.29.29):
```

- **IP地址**：必填项
- **子网掩码**：可留空，默认为 `255.255.255.0`
- **网关地址**：必填项
- **主DNS**：可留空，默认为 `223.5.5.5`（阿里DNS）
- **备用DNS**：可留空，默认为 `119.29.29.29`（腾讯DNS）

### 3. 预设配置

当前预设的配置包括：

| 配置名称 | IP地址         | 子网掩码      | 网关           |
| -------- | -------------- | ------------- | -------------- |
| test     | 192.168.51.232 | 255.255.255.0 | 192.168.51.1   |
| work     | 172.16.100.57  | 255.255.254.0 | 172.16.101.254 |

## 配置修改

### 修改网卡名称

在 `main.go` 文件中找到以下常量并修改为你的网卡名称：

```go
const (
    INTERFACE_NAME = "以太网" // ← 修改为你的网卡名称
)
```

常见网卡名称：

- 中文Windows：`"以太网"`、`"本地连接"`
- 英文Windows：`"Ethernet"`、`"Local Area Connection"`

### 添加/修改预设配置

在 `main.go` 文件中找到 `profiles` 变量，按以下格式添加或修改：

```go
var profiles = []Profile{
    {Name: "test", IP: "192.168.51.232", Netmask: "255.255.255.0", Gateway: "192.168.51.1"},
    {Name: "work", IP: "172.16.100.57", Netmask: "255.255.254.0", Gateway: "172.16.101.254"},
    // 添加新的配置...
}
```

## 编译说明

### 环境要求

- Go 1.16 或更高版本
- Windows 操作系统
- 管理员权限（运行时需要）

### 编译命令

```bash
# 编译生成可执行文件
go build -ldflags="-s -w" -o ipswitch.exe main.go
```

## 注意事项

1. **管理员权限**：所有网络配置操作都需要管理员权限，程序会自动检测并请求提权
2. **网卡名称**：确保 `INTERFACE_NAME` 常量与实际网卡名称匹配
3. **IP格式**：所有IP地址必须使用点分十进制格式（如：192.168.1.1）
4. **网络连接**：切换IP后可能需要几秒钟重新连接网络

## 故障排除

### 常见问题

**Q: 运行时提示"未找到配置"**

- A: 检查配置名称是否正确，或使用 `ipswitch.exe help` 查看可用配置

**Q: UAC提权失败**

- A: 手动右键选择"以管理员身份运行"

**Q: 网卡名称不匹配**

- A: 在命令提示符中运行 `netsh interface show interface` 查看正确的网卡名称

**Q: 设置IP失败**

- A: 确保输入的IP地址、子网掩码和网关在同一网段

## 版本信息

- **版本**: v1.0
- **作者**: [您的姓名]
- **许可证**: MIT

## 贡献

欢迎提交Issue或Pull Request来改进此工具！

---

> **提示**: 此工具仅适用于Windows系统，使用Windows原生的`netsh`命令进行网络配置。
